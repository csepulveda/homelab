loki:
  test:
    enabled: false
  lokiCanary:
    enabled: false
  monitoring:
    dashboards:
      enabled: true
    serviceMonitor:
      enabled: true
  global:
    extraEnv:
    - name: AWS_ACCESS_KEY_ID
      valueFrom:
        secretKeyRef:
          name: loki-bucket
          key: AWS_ACCESS_KEY_ID
    - name: AWS_SECRET_ACCESS_KEY
      valueFrom:
        secretKeyRef:
          name: loki-bucket
          key: AWS_SECRET_ACCESS_KEY
  loki:
    image:
      tag: 3.5.1
    storage:
      type: s3
      bucketNames:
        chunks: loki-bucket
        ruler: loki-bucket
        admin: loki-bucket
      s3:
        endpoint: "http://rook-ceph-rgw-ceph-objectstore.rook-ceph.svc.cluster.local:80"
        region: "us-east-1"
        s3ForcePathStyle: true
        insecure: true
    schemaConfig:
      configs:
      - from: 2024-01-01
        store: tsdb
        object_store: s3
        schema: v13
        index:
          prefix: index_
          period: 24h
    auth_enabled: false
    commonConfig:
      replication_factor: 2
    ingesterConfig:
      chunk_target_size: 102400    # 100KB (más pequeño)
      chunk_idle_period: 5m       # 5 min (más rápido)
      max_chunk_age: 10m          # 10 min (más rápido)
  minio:
    enabled: false
  read:
    replicas: 2
    extraArgs:
    - -log.level=error
  write:
    replicas: 2
    persistence:
      storageClass: iscsi
    extraArgs:
    - -log.level=info
  backend:
    replicas: 2
    persistence:
      storageClass: iscsi
    extraArgs:
    - -log.level=info
  gateway:
    replicas: 2
    extraArgs:
    - -log.level=error
